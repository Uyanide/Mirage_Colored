<!doctype html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>幻影坦克生成</title><script defer="defer">/*! For license information please see main.5f328f57fa8c408b2ca2.js.LICENSE.txt */
(()=>{"use strict";var e={431:(e,n,t)=>{t.d(n,{A:()=>i});var A=t(601),r=t.n(A),o=t(314),a=t.n(o)()(r());a.push([e.id,':root {\n    --secondary-background-color: #fff;\n    --background-color: #ececec;\n    --secondary-notselected-background-color: #f6f6f6;\n    --element-backgound-color: #f6f6f6;\n    --front-color: #000;\n    --front-secondary-color: #666;\n    --element-border-color: #b8b8b8;\n    --link-color: #2285d5;\n\n    --large-font-size: 1.2rem;\n    --medium-font-size: 0.9rem;\n    --small-font-size: 0.7rem;\n}\n\n[data-theme="light"] {\n    --secondary-background-color: #fff;\n    --background-color: #ececec;\n    --secondary-notselected-background-color: #f6f6f6;\n    --element-backgound-color: #eaeaea;\n    --front-color: #000;\n    --front-secondary-color: #666;\n    --element-border-color: #b8b8b8;\n    --link-color: #2285d5;\n}\n\n[data-theme="dark"] {\n    --secondary-background-color: #000;\n    --background-color: #191919;\n    --secondary-notselected-background-color: #101010;\n    --element-backgound-color: #444;\n    --front-color: #dfdfdf;\n    --front-secondary-color: #999;\n    --element-border-color: #555;\n    --link-color: #4baeff;\n}\n\n/**************************************/\n\n* {\n    transition: background-color 0.3s ease-in-out, color 0.1s ease-in-out;\n    user-select: none;\n    box-sizing: content-box;\n}\n\n.inputReact {\n    background-color: var(--element-backgound-color);\n    color: var(--front-color);\n    padding: 5px;\n    border: 1px solid var(--element-border-color);\n    border-radius: 5px;\n    font-size: var(--medium-font-size);\n}\n\ninput[type=file] {\n    display: none;\n}\n\ninput[type=number] {\n    width: 50px;\n}\n\nCanvas {\n    border: 1px solid var(--element-border-color);\n}\n\nhr {\n    border: 0;\n    border-top: 1px solid var(--element-border-color);\n}\n\n/**************************************/\n\n.displayFlexColumn {\n    display: flex;\n    flex-direction: column;\n    justify-items: center;\n    align-items: center;\n}\n\n.displayFlexRow {\n    display: flex;\n    flex-direction: row;\n    justify-items: center;\n    align-items: center;\n}\n\n/**************************************/\n\n.marginTopHigh {\n    margin-top: 20px;\n}\n\n.marginTopMedium {\n    margin-top: 10px;\n}\n\n.marginTopLow {\n    margin-top: 5px;\n}\n\n.marginLeftLow {\n    margin-left: 5px;\n}\n\n.marginRightLow {\n    margin-right: 5px;\n}\n\n.marginBottomMedium {\n    margin-bottom: 10px;\n}\n\n.marginBottomHigh {\n    margin-bottom: 20px;\n}\n\n.marginBottomExtreme {\n    margin-bottom: 40px;\n}\n\n/**************************************/\n\n.justifyCenter {\n    justify-content: center;\n}\n\n.justifySpaceBetween {\n    justify-content: space-between;\n}\n\n.gapLow {\n    gap: 5px;\n}\n\n.alignCenter {\n    align-items: center;\n}\n\n.flexColumn {\n    flex-direction: column;\n}\n\n.flexRow {\n    flex-direction: row;\n}\n\n.positionRelative {\n    position: relative;\n}\n\n.textAlignCenter {\n    text-align: center;\n}\n\n/**************************************/\n\n.paddingLow {\n    padding: 5px;\n}\n\n.paddingMedium {\n    padding: 10px;\n}\n\n.paddingHigh {\n    padding: 15px;\n}\n\n.displayNone {\n    display: none;\n}\n\n.displayBlock {\n    display: block;\n}\n\n.displayFlex {\n    display: flex;\n}\n\n.fontLarge {\n    font-size: var(--large-font-size);\n}\n\n.fontMedium {\n    font-size: var(--medium-font-size);\n}\n\n.fontSmall {\n    font-size: var(--small-font-size);\n}\n\n.textDecorationNone {\n    text-decoration: none;\n}\n\n.textDecorationUnderline {\n    text-decoration: underline;\n}\n\n.borderNone {\n    border: none;\n}\n\n.borderRadiusLow {\n    border-radius: 5px;\n}\n\n.borderRadiusHigh {\n    border-radius: 10px;\n}\n\n.borderRadiusExtreme {\n    border-radius: 20px;\n}\n\n.borderRadiusOnlyTop {\n    border-radius: 10px 10px 0 0;\n}\n\n.borderRadiusOnlyBottom {\n    border-radius: 0 0 15px 15px;\n}\n\n.borderSolidNone {\n    border: 0px, solid;\n}\n\n.borderCollapse {\n    border-collapse: collapse;\n}\n\n.frontColor {\n    color: var(--front-color);\n}\n\n.frontSecondaryColor {\n    color: var(--front-secondary-color);\n}\n\n.frontLinkColor {\n    color: var(--link-color);\n}\n\n.backgroundSecondary {\n    background-color: var(--secondary-background-color);\n}\n\n.backgroundNotSelected {\n    background-color: var(--secondary-notselected-background-color);\n}\n\n.backgroundElement {\n    background-color: var(--element-backgound-color);\n}\n\n.backgroundPrimary {\n    background-color: var(--background-color);\n}\n\n/**************************************/\n\n.transformNone {\n    transform: none;\n}\n\n.transformSize:hover {\n    transform: scale(1.05);\n    transition: transform 0.2s;\n}\n\n.transformSecondary:hover {\n    transform: none;\n    background-color: var(--secondary-background-color);\n}\n\n/**************************************/\n\n.refWidthHigh {\n    width: 90%;\n}\n\n.refWidthFull {\n    width: 100%;\n}\n\n.refWidthHalf {\n    width: 50%;\n}',""]);const i=a},618:(e,n,t)=>{t.d(n,{A:()=>i});var A=t(601),r=t.n(A),o=t(314),a=t.n(o)()(r());a.push([e.id,"#isDarkmodeContainer {\n    position: fixed;\n    left: 10px;\n    bottom: 10px;\n    border: 1px solid var(--element-border-color);\n    box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.1);\n    border-radius: 40px;\n}\n\n.DisplayArea {\n    max-width: 1000px;\n    min-width: 300px;\n}\n\n.title {\n    font-size: clamp(30px, 5vw, 50px);\n    margin-bottom: 10px;\n}\n\n.subTitle {\n    font-size: clamp(20px, 3vw, 30px);\n    margin-top: auto;\n    margin-bottom: 12px;\n}\n\n.RowContainer {\n    width: min(100%, 750px);\n}\n\n#versionRecordTable {\n    max-width: min(100%, 600px);\n}\n\n#versionRecordTable td {\n    padding: 10px;\n}",""]);const i=a},107:(e,n,t)=>{t.d(n,{A:()=>i});var A=t(601),r=t.n(A),o=t(314),a=t.n(o)()(r());a.push([e.id,'.switchContainer {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n}\n\n.switch {\n    position: relative;\n    display: inline-block;\n    width: 40px;\n    height: 22px;\n}\n\n.switch input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n}\n\n.switchSlider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    transition: .4s;\n    border-radius: 22px;\n}\n\n.switchSlider:before {\n    position: absolute;\n    content: "";\n    height: 18px;\n    width: 18px;\n    left: 2px;\n    bottom: 2px;\n    background-color: white;\n    transition: .4s;\n    border-radius: 50%;\n}\n\ninput:checked+.switchSlider {\n    background-color: #002a6e;\n}\n\ninput:checked+.switchSlider:before {\n    transform: translateX(100%);\n}',""]);const i=a},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",A=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),A&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),A&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,A,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(A)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);A&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),n.push(u))}},n}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var n=[];function t(e){for(var t=-1,A=0;A<n.length;A++)if(n[A].identifier===e){t=A;break}return t}function A(e,A){for(var o={},a=[],i=0;i<e.length;i++){var c=e[i],l=A.base?c[0]+A.base:c[0],u=o[l]||0,s="".concat(l," ").concat(u);o[l]=u+1;var f=t(s),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)n[f].references++,n[f].updater(d);else{var h=r(d,A);A.byIndex=i,n.splice(i,0,{identifier:s,updater:h,references:1})}a.push(s)}return a}function r(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var o=A(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var i=t(o[a]);n[i].references--}for(var c=A(e,r),l=0;l<o.length;l++){var u=t(o[l]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}o=c}}},659:e=>{var n={};e.exports=function(e,t){var A=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");A.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var A="";t.supports&&(A+="@supports (".concat(t.supports,") {")),t.media&&(A+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(A+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),A+=t.css,r&&(A+="}"),t.media&&(A+="}"),t.supports&&(A+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(A+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(A,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(A){var r=n[A];if(void 0!==r)return r.exports;var o=n[A]={id:A,exports:{}};return e[A](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var A in n)t.o(n,A)&&!t.o(e,A)&&Object.defineProperty(e,A,{enumerable:!0,get:n[A]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var A=t(72),r=t.n(A),o=t(825),a=t.n(o),i=t(659),c=t.n(i),l=t(56),u=t.n(l),s=t(540),f=t.n(s),d=t(113),h=t.n(d),v=t(107),p={};p.styleTagTransform=h(),p.setAttributes=u(),p.insert=c().bind(null,"head"),p.domAPI=a(),p.insertStyleElement=f();r()(v.A,p);v.A&&v.A.locals&&v.A.locals;var m=t(431),g={};g.styleTagTransform=h(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=f();r()(m.A,g);m.A&&m.A.locals&&m.A.locals;var y=t(618),b={};b.styleTagTransform=h(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=f();r()(y.A,b);y.A&&y.A.locals&&y.A.locals;var _=_||{},w=w||{};const x=JSON.parse('{"app_version":"1.0.0","is_colored":true,"scale_i":0.3,"scale_c":0.2,"weight_i":0.7,"max_size":1200}');function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(){I=function(){return n};var e,n={},t=Object.prototype,A=t.hasOwnProperty,r=Object.defineProperty||function(e,n,t){e[n]=t.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{l({},"")}catch(e){l=function(e,n,t){return e[n]=t}}function u(e,n,t,A){var o=n&&n.prototype instanceof m?n:m,a=Object.create(o.prototype),i=new z(A||[]);return r(a,"_invoke",{value:D(e,t,i)}),a}function s(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}n.wrap=u;var f="suspendedStart",d="suspendedYield",h="executing",v="completed",p={};function m(){}function g(){}function y(){}var b={};l(b,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(L([])));w&&w!==t&&A.call(w,a)&&(b=w);var x=y.prototype=m.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(n){l(e,n,(function(e){return this._invoke(n,e)}))}))}function k(e,n){function t(r,o,a,i){var c=s(e[r],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==P(u)&&A.call(u,"__await")?n.resolve(u.__await).then((function(e){t("next",e,a,i)}),(function(e){t("throw",e,a,i)})):n.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return t("throw",e,a,i)}))}i(c.arg)}var o;r(this,"_invoke",{value:function(e,A){function r(){return new n((function(n,r){t(e,A,n,r)}))}return o=o?o.then(r,r):r()}})}function D(n,t,A){var r=f;return function(o,a){if(r===h)throw Error("Generator is already running");if(r===v){if("throw"===o)throw a;return{value:e,done:!0}}for(A.method=o,A.arg=a;;){var i=A.delegate;if(i){var c=E(i,A);if(c){if(c===p)continue;return c}}if("next"===A.method)A.sent=A._sent=A.arg;else if("throw"===A.method){if(r===f)throw r=v,A.arg;A.dispatchException(A.arg)}else"return"===A.method&&A.abrupt("return",A.arg);r=h;var l=s(n,t,A);if("normal"===l.type){if(r=A.done?v:d,l.arg===p)continue;return{value:l.arg,done:A.done}}"throw"===l.type&&(r=v,A.method="throw",A.arg=l.arg)}}}function E(n,t){var A=t.method,r=n.iterator[A];if(r===e)return t.delegate=null,"throw"===A&&n.iterator.return&&(t.method="return",t.arg=e,E(n,t),"throw"===t.method)||"return"!==A&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+A+"' method")),p;var o=s(r,n.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[n.resultName]=a.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function j(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(n){if(n||""===n){var t=n[a];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function t(){for(;++r<n.length;)if(A.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}throw new TypeError(P(n)+" is not iterable")}return g.prototype=y,r(x,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===g||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},C(k.prototype),l(k.prototype,i,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,A,r,o){void 0===o&&(o=Promise);var a=new k(u(e,t,A,r),o);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var n=Object(e),t=[];for(var A in n)t.push(A);return t.reverse(),function e(){for(;t.length;){var A=t.pop();if(A in n)return e.value=A,e.done=!1,e}return e.done=!0,e}},n.values=L,z.prototype={constructor:z,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!n)for(var t in this)"t"===t.charAt(0)&&A.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(A,r){return i.type="throw",i.arg=n,t.next=A,r&&(t.method="next",t.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=A.call(a,"catchLoc"),l=A.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&A.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),p},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),j(t),p}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var A=t.completion;if("throw"===A.type){var r=A.arg;j(t)}return r}}throw Error("illegal catch attempt")},delegateYield:function(n,t,A){return this.delegate={iterator:L(n),resultName:t,nextLoc:A},"next"===this.method&&(this.arg=e),p}},n}function C(e,n,t,A,r,o,a){try{var i=e[o](a),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(A,r)}function k(e,n){for(var t=0;t<n.length;t++){var A=n[t];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(e,S(A.key),A)}}function D(e,n,t){return n&&k(e.prototype,n),t&&k(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,n,t){return(n=S(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e){var n=function(e,n){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var A=t.call(e,n||"default");if("object"!=P(A))return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==P(n)?n:n+""}document.addEventListener("DOMContentLoaded",(function(){var e=[{id:"maxSizeInput",value:x.max_size},{id:"innerScaleRange",value:x.scale_i},{id:"innerScaleInput",value:x.scale_i},{id:"coverScaleRange",value:x.scale_c},{id:"coverScaleInput",value:x.scale_c},{id:"innerWeightRange",value:x.weight_i},{id:"innerWeightInput",value:x.weight_i}];document.getElementById("isColoredCheckbox").checked=x.is_colored,e.forEach((function(e){document.getElementById(e.id).value=e.value}))}));var j=D((function e(n,t,A,r,o,a){var i=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"updateInnerImg",function(){var e,n=(e=I().mark((function e(n){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i._innerDataCache=null,i._innerImg=n,0!==i._max_size?i._innerImg.width>i._innerImg.height?(i._width=i._max_size,i._height=Math.ceil(i._innerImg.height*i._max_size/i._innerImg.width)):(i._height=i._max_size,i._width=Math.ceil(i._innerImg.width*i._max_size/i._innerImg.height)):(i._width=i._innerImg.width,i._height=i._innerImg.height),i._innerCanvas.width=i._width,i._innerCanvas.height=i._height,(t=i._innerCanvas.getContext("2d")).drawImage(n,0,0,i._width,i._height),i._innerImgData=t.getImageData(0,0,i._width,i._height),i._is_colored||i._convertGray(i._innerImgData),i._coverImgData&&i.updateCoverImg(i._coverImg);case 10:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(A,r){var o=e.apply(n,t);function a(e){C(o,A,r,a,i,"next",e)}function i(e){C(o,A,r,a,i,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()),E(this,"updateCoverImg",(function(e){if(i._coverDataCache=null,i._coverImg=e,i._innerImg){var n,t,A,r,o=e.width/e.height;o<i._width/i._height?(n=0,t=Math.ceil((i._height-i._width/o)/2),A=i._width,r=Math.ceil(i._width/o)):(n=Math.ceil((i._width-i._height*o)/2),t=0,A=Math.ceil(i._height*o),r=i._height),i._coverCanvas.width=i._width,i._coverCanvas.height=i._height;var a=i._coverCanvas.getContext("2d");a.drawImage(e,n,t,A,r),i._coverImgData=a.getImageData(0,0,i._width,i._height)}else{i._coverCanvas.width=e.width,i._coverCanvas.height=e.height;var c=i._coverCanvas.getContext("2d");c.drawImage(e,0,0),i._coverImgData=c.getImageData(0,0,e.width,e.height)}i._is_colored||i._convertGray(i._coverImgData),i._innerImgData&&i._process()})),E(this,"swapImg",(function(){if(i._innerImg||i._coverImg){if(!i._innerImg)return i._clearCanvas(i._coverCanvas),i._coverImgData=null,i.updateInnerImg(i._coverImg),void(i._coverImg=null);if(!i._coverImg)return i._clearCanvas(i._innerCanvas),i._innerImgData=null,i.updateCoverImg(i._innerImg),void(i._innerImg=null);var e=i._innerImg;i._innerImg=i._coverImg,i._coverImg=e;var n=i._innerImgData;i._innerImgData=i._coverImgData,i._coverImgData=n,i._innerCanvas.getContext("2d").putImageData(i._innerImgData,0,0),i._coverCanvas.getContext("2d").putImageData(i._coverImgData,0,0),i._innerDataCache=null,i._coverDataCache=null,i._process()}})),E(this,"_clearCanvas",(function(e){e.width=e.width})),E(this,"_convertGray",(function(e){for(var n=e.data,t=0;t<n.length;t+=4){var A=Math.floor(.299*n[t]+.587*n[t+1]+.114*n[t+2]);n[t]=A,n[t+1]=A,n[t+2]=A}})),E(this,"updateColorMode",(function(e){i._is_colored=e,i._innerImgData&&i.updateInnerImg(i._innerImg)})),E(this,"updateMaxSize",(function(e){i._max_size=e,i._innerImg&&i.updateInnerImg(i._innerImg)})),E(this,"updateInnerScale",(function(e){i._scale_i=e,i._innerDataCache=null,i._process()})),E(this,"updateCoverScale",(function(e){i._scale_c=1-e,i._coverDataCache=null,i._process()})),E(this,"updateInnerWeight",(function(e){i._weight_i=e,i._process()})),E(this,"_process",(function(){if(i._innerImgData&&i._coverImgData){var e=!1;if(!i._innerDataCache){var n=i._innerImgData.data;i._innerDataCache=new Uint8ClampedArray(n.length);for(var t=0;t<n.length;t+=4)i._innerDataCache[t]=Math.floor(n[t]*i._scale_i),i._innerDataCache[t+1]=Math.floor(n[t+1]*i._scale_i),i._innerDataCache[t+2]=Math.floor(n[t+2]*i._scale_i);e=!0}if(!i._coverDataCache){var A=i._coverImgData.data;i._coverDataCache=new Uint8ClampedArray(A.length);for(var r=0;r<A.length;r+=4)i._coverDataCache[r]=Math.floor(255-(255-A[r])*i._scale_c),i._coverDataCache[r+1]=Math.floor(255-(255-A[r+1])*i._scale_c),i._coverDataCache[r+2]=Math.floor(255-(255-A[r+2])*i._scale_c);e=!0}if(i._is_colored){if(!i._alphaCache||e){i._alphaCache=new Float32Array(i._innerDataCache.length>>2);for(var o=0;o<i._innerDataCache.length;o+=4){var a=i._innerDataCache[o],c=i._innerDataCache[o+1],l=i._innerDataCache[o+2],u=i._coverDataCache[o],s=a-u,f=c-i._coverDataCache[o+1],d=l-i._coverDataCache[o+2];i._alphaCache[o>>2]=Math.min(Math.max(1+((2048|s+(a+u<<1))*s-(d+(a+u<<1)-3068)*d+(f<<12))/(1020*(s-d)+2349060),0),1)}}i._outputData=new Uint8ClampedArray(i._innerDataCache.length);for(var h=0;h<i._innerDataCache.length;h+=4){var v=i._alphaCache[h>>2],p=255*v;i._outputData[h]=((i._innerDataCache[h]-p+255-i._coverDataCache[h])*i._weight_i+p-255+i._coverDataCache[h])/v,i._outputData[h+1]=((i._innerDataCache[h+1]-p+255-i._coverDataCache[h+1])*i._weight_i+p-255+i._coverDataCache[h+1])/v,i._outputData[h+2]=((i._innerDataCache[h+2]-p+255-i._coverDataCache[h+2])*i._weight_i+p-255+i._coverDataCache[h+2])/v,i._outputData[h+3]=255*v}}else{i._outputData=new Uint8ClampedArray(i._innerDataCache.length);for(var m=0;m<i._innerDataCache.length;m+=4){var g=255+i._innerDataCache[m]-i._coverDataCache[m],y=255*i._innerDataCache[m]/g;i._outputData[m]=y,i._outputData[m+1]=y,i._outputData[m+2]=y,i._outputData[m+3]=g}}i._showOutput()}})),E(this,"_showOutput",(function(){i._outputCanvas.width=i._width,i._outputCanvas.height=i._height,i._outputCanvas.getContext("2d").putImageData(new ImageData(i._outputData,i._width,i._height),0,0),i._blackCanvas.width=i._width,i._blackCanvas.height=i._height;var e=i._blackCanvas.getContext("2d");e.fillStyle="black",e.fillRect(0,0,i._width,i._height),e.drawImage(i._outputCanvas,0,0),i._whiteCanvas.width=i._width,i._whiteCanvas.height=i._height;var n=i._whiteCanvas.getContext("2d");n.fillStyle="white",n.fillRect(0,0,i._width,i._height),n.drawImage(i._outputCanvas,0,0)})),E(this,"saveResult",(function(){var e=document.createElement("a");e.download="result_".concat((new Date).getTime(),".png"),e.href=i._outputCanvas.toDataURL("image/png"),document.body.appendChild(e),e.click(),document.body.removeChild(e)})),this._scale_i=n.scale_i,this._scale_c=1-n.scale_c,this._weight_i=n.weight_i,this._innerCanvas=t,this._coverCanvas=A,this._outputCanvas=r,this._whiteCanvas=o,this._blackCanvas=a,this._is_colored=n.is_colored,this._max_size=n.max_size}));function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function L(){L=function(){return n};var e,n={},t=Object.prototype,A=t.hasOwnProperty,r=Object.defineProperty||function(e,n,t){e[n]=t.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{l({},"")}catch(e){l=function(e,n,t){return e[n]=t}}function u(e,n,t,A){var o=n&&n.prototype instanceof m?n:m,a=Object.create(o.prototype),i=new S(A||[]);return r(a,"_invoke",{value:C(e,t,i)}),a}function s(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}n.wrap=u;var f="suspendedStart",d="suspendedYield",h="executing",v="completed",p={};function m(){}function g(){}function y(){}var b={};l(b,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(j([])));w&&w!==t&&A.call(w,a)&&(b=w);var x=y.prototype=m.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(n){l(e,n,(function(e){return this._invoke(n,e)}))}))}function I(e,n){function t(r,o,a,i){var c=s(e[r],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==z(u)&&A.call(u,"__await")?n.resolve(u.__await).then((function(e){t("next",e,a,i)}),(function(e){t("throw",e,a,i)})):n.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return t("throw",e,a,i)}))}i(c.arg)}var o;r(this,"_invoke",{value:function(e,A){function r(){return new n((function(n,r){t(e,A,n,r)}))}return o=o?o.then(r,r):r()}})}function C(n,t,A){var r=f;return function(o,a){if(r===h)throw Error("Generator is already running");if(r===v){if("throw"===o)throw a;return{value:e,done:!0}}for(A.method=o,A.arg=a;;){var i=A.delegate;if(i){var c=k(i,A);if(c){if(c===p)continue;return c}}if("next"===A.method)A.sent=A._sent=A.arg;else if("throw"===A.method){if(r===f)throw r=v,A.arg;A.dispatchException(A.arg)}else"return"===A.method&&A.abrupt("return",A.arg);r=h;var l=s(n,t,A);if("normal"===l.type){if(r=A.done?v:d,l.arg===p)continue;return{value:l.arg,done:A.done}}"throw"===l.type&&(r=v,A.method="throw",A.arg=l.arg)}}}function k(n,t){var A=t.method,r=n.iterator[A];if(r===e)return t.delegate=null,"throw"===A&&n.iterator.return&&(t.method="return",t.arg=e,k(n,t),"throw"===t.method)||"return"!==A&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+A+"' method")),p;var o=s(r,n.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[n.resultName]=a.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function D(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function E(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function j(n){if(n||""===n){var t=n[a];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function t(){for(;++r<n.length;)if(A.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}throw new TypeError(z(n)+" is not iterable")}return g.prototype=y,r(x,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===g||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},P(I.prototype),l(I.prototype,i,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,A,r,o){void 0===o&&(o=Promise);var a=new I(u(e,t,A,r),o);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var n=Object(e),t=[];for(var A in n)t.push(A);return t.reverse(),function e(){for(;t.length;){var A=t.pop();if(A in n)return e.value=A,e.done=!1,e}return e.done=!0,e}},n.values=j,S.prototype={constructor:S,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!n)for(var t in this)"t"===t.charAt(0)&&A.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(A,r){return i.type="throw",i.arg=n,t.next=A,r&&(t.method="next",t.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=A.call(a,"catchLoc"),l=A.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&A.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),p},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),E(t),p}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var A=t.completion;if("throw"===A.type){var r=A.arg;E(t)}return r}}throw Error("illegal catch attempt")},delegateYield:function(n,t,A){return this.delegate={iterator:j(n),resultName:t,nextLoc:A},"next"===this.method&&(this.arg=e),p}},n}function T(e,n,t,A,r,o,a){try{var i=e[o](a),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(A,r)}function O(e){return function(){var n=this,t=arguments;return new Promise((function(A,r){var o=e.apply(n,t);function a(e){T(o,A,r,a,i,"next",e)}function i(e){T(o,A,r,a,i,"throw",e)}a(void 0)}))}}var M,B,N=function(e){return new Promise((function(n,t){var A=new FileReader;A.onload=function(){var e=new Image;e.src=A.result,e.onload=function(){n(e)},e.onerror=function(e){t(e)}},A.onerror=function(e){t(e)},A.readAsDataURL(e)}))},R=function(){var e=O(L().mark((function e(n,t){var A,r=arguments;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A=r.length>2&&void 0!==r[2]?r[2]:"操作失败! ",e.prev=1,e.next=4,t(n);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),alert(A+e.t0.message),console.error(A,e.t0.message,e.t0.stack);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n,t){return e.apply(this,arguments)}}(),H=[{id:"innerFileInput",event:"change",callback:(B=O(L().mark((function e(n){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.target.files[0],e.t0=w.mirage,e.next=4,N(t);case 4:e.t1=e.sent,e.t0.updateInnerImg.call(e.t0,e.t1),n.target.value="";case 7:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)}),errorMsg:"里图加载失败! "},{id:"coverFileInput",event:"change",callback:(M=O(L().mark((function e(n){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.target.files[0],e.t0=w.mirage,e.next=4,N(t);case 4:e.t1=e.sent,e.t0.updateCoverImg.call(e.t0,e.t1),n.target.value="";case 7:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)}),errorMsg:"表图加载失败! "},{id:"innerCanvas",event:"click",callback:function(){document.getElementById("innerFileInput").click()},errorMsg:"里图加载失败! "},{id:"coverCanvas",event:"click",callback:function(){document.getElementById("coverFileInput").click()},errorMsg:"表图加载失败! "},{id:"innerScaleRange",event:"input",callback:function(e){_.innerScaleInput.value=e.target.value,w.mirage.updateInnerScale(parseFloat(e.target.value))}},{id:"innerScaleInput",event:"input",callback:function(e){clearTimeout(_.innerScaleTimeout),_.innerScaleTimeout=setTimeout((function(){var n=parseFloat(e.target.value);isNaN(n)||(n=Math.min(Math.max(n,0),1),_.innerScaleSlider.value=n,_.innerScaleInput.value=n,w.mirage.updateInnerScale(n))}),500)}},{id:"coverScaleRange",event:"input",callback:function(e){_.coverScaleInput.value=e.target.value,w.mirage.updateCoverScale(parseFloat(e.target.value))}},{id:"coverScaleInput",event:"input",callback:function(e){clearTimeout(_.coverScaleTimeout),_.coverScaleTimeout=setTimeout((function(){var n=parseFloat(e.target.value);isNaN(n)||(n=Math.min(Math.max(n,0),1),_.coverScaleSlider.value=n,_.coverScaleInput.value=n,w.mirage.updateCoverScale(n))}),500)}},{id:"innerWeightRange",event:"input",callback:function(e){_.innerWeightInput.value=e.target.value,w.mirage.updateInnerWeight(parseFloat(e.target.value))}},{id:"innerWeightInput",event:"input",callback:function(e){clearTimeout(_.innerWeightTimeout),_.innerWeightTimeout=setTimeout((function(){var n=parseFloat(e.target.value);isNaN(n)||(n=Math.min(Math.max(n,0),1),_.innerWeightSlider.value=n,_.innerWeightInput.value=n,w.mirage.updateInnerWeight(n))}),500)}},{id:"isColoredCheckbox",event:"change",callback:function(e){w.mirage.updateColorMode(e.target.checked)}},{id:"maxSizeInput",event:"input",callback:function(e){clearTimeout(_.maxSizeTimeout),_.maxSizeTimeout=setTimeout((function(){var n=parseInt(e.target.value);n=Math.min(Math.max(n,0),4096),e.target.value=n,w.mirage.updateMaxSize(n)}),500)}},{id:"saveButton",event:"click",callback:function(){w.mirage.saveResult()},errorMsg:"保存失败! "},{id:"swapButton",event:"click",callback:function(){w.mirage.swapImg()}},{id:"downloadHtmlLink",event:"click",callback:function(){var e=document.documentElement.outerHTML,n=(new DOMParser).parseFromString(e,"text/html"),t=n.getElementById("content"),A=document.implementation.createHTMLDocument("Filtered Document");A.head.innerHTML=n.head.innerHTML,n.body.classList.forEach((function(e){return A.body.classList.add(e)})),A.body.appendChild(A.importNode(t,!0));var r=document.createElement("a");r.download="mirage.html",r.href=URL.createObjectURL(new Blob([A.documentElement.outerHTML],{type:"text/html"})),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)},errorMsg:"下载失败! "}];function F(e,n,t){if(X())return Reflect.construct.apply(null,arguments);var A=[null];A.push.apply(A,n);var r=new(e.bind.apply(e,A));return t&&W(r,t.prototype),r}function W(e,n){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},W(e,n)}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}var G=navigator.userAgent;_.isOnPhone=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(G),_.isDownloadNotSupported=_.isOnPhone&&/xiaomi|miui|quark|ucbrowser/i.test(G),_.isOnTiebaBrowser=/tieba/i.test(G);var U=function(e){void 0!==e&&"string"==typeof e||(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e),document.getElementById("isDarkmodeCheckbox").checked="dark"===e};document.addEventListener("DOMContentLoaded",(function(){U(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",U),document.getElementById("isDarkmodeCheckbox").addEventListener("change",(function(e){var n=e.target.checked?"dark":"light";U(n)})),_.isOnTiebaBrowser&&alert("建议点击右上角使用正常浏览器打开本页面。"),_.isDownloadNotSupported&&alert("由于浏览器限制，图片保存功能可能出现异常，建议使用其他浏览器或等待后续更新适配。");var e=document.createElement("link");e.rel="shortcut icon",e.href="data:image/vnd.microsoft.icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAAAAAAMQOAADEDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQFBhMVFhlCLCsvZzc1OHU+Oz5/KCgrYAoLDSUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANa5rv/ClYn/sHVl/6RiUP+bWET/nlVC/59VRP+fW0j/r3Ji/86jlf8DBAYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUdIl+0ZUz/qGVV/7uMfv/JrKP/2sjD/9/Oyf/fz8n/28vF/9bEvP/JrKP/tYR2/7RgR/8iGh9eAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQGCBTKk37/08zM//b//////////Pn1//fs5f/25dz/9uPa//bh2f/14Nf/9uTb//fp4P/9/vr///////n////FsKftAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcISVW36WW//y3oP/znYT/8puC//OgiP/zo4z/9KWO//Olj//0po//86WP//Slj//0pY7/9KSO//Sgif/ynIP/8ZqB//GhiP//6dH/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgYIGfeTdv/zoYf/8qiR//K0oP/1wrH/9cy///fTxf/12Mz/9dzS//Tf1f/24df/9uPa//Xi2f/34df/9eDW//jb1P/z0cb/9sa2/++ynf//tpP/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQECBQAAAAD///n/+f////r////5//z/+Pr3//f59f/4+vb/+P36//n+/P/5//3/+f/+//n//v/5////+f////n//v/4/vv/+Pz5//j69v/3+PX/+fr3//f////n4NrvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA19/h6vf8+v/15d//9tjN//XSxv/0yrv/8sCv//S0pP/xq5j/8qiS//GmkP/xo4z/8aSM//Gii//yoor/8aSO//Kqk//yrpr/8bWj//TBrv/108f/9OLa//z++v9HUE9nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAICAgr9rZH/9J6G//OmkP/zp5H/86eR//Onkf/zpo//86SN//Ohiv/zoYn/86CI//OgiP/zoYn/86GK//Kiiv/zoor/86SN//Olj//zppH/86eR//Sokf/zp5H/8Z+G//+tk/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA55h+9/GijP/ysp//9MOx//XRxP/12s7/9uHZ//jn3//37uf/+Pbx//f38v/5+Pb/9/n2//n39P/59vH/+PXx//jz8P/37uf/9ung//fi2v/23dP/9NfN//bMv//xuKb/7p6H/9CKdN4AAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQT/////+P////j79//4+PT/+Pfz//j38//49/P/+Pj0//j49P/4+fX/+Pn1//n69v/5+vb/+fn3//j59v/4+ff/+fn3//n69//4+fb/+fn2//f59f/4+PT/+Pj0//j59v/6/////////wEBAQUAAAAAAAAAAAAAAAAAAAAAx9HT4Pbx7P/26uT/9uDW//fazf/21sn/9dLF//TMvf/yxLX/9MGx//O8rf/yuar/8Lil//O2pP/yt6P/9Lil//S4pf/zt6T/8bWi//W4p//yuqf/87uo//PDsv/0xbX/9Mu7//bXzf/049n//////wAAAAAAAAAAAAAAAAAAAAD/qI3/9KKL//SkjP/0pY7/86WO//Oljv/zpY7/86WP//Omj//zppD/86eQ//Ookv/zqJL/86iS//Ookv/zqJL/86iS//Ookv/zqJL/86iS//Sokv/zqJP/86aQ//SmkP/0pY//9KWN//Skj//1n4b/Vz02iAAAAAAAAAAAqYJ1zem0pv/luav/58a9/+XIvf/jycH/6dDJ/+jNxf/kx73/5ce8/+nHvf/nx7v/57qs/+S4qv/nvbD/5byu/+rDtv/sx7v/6sW6/+vGu//pxLn/58G3/+bDuP/fyb//28S7/+LPyf/j0cv/2sW9/+zSyf+xmY3jAAAAAAAAAAANDQ0n9fr4//f////0+vv/9fv9/+vz8f/x+Pb/9Pr8//P6/P/y+Pr/8/n6//T5+//z+fv/9Pv8//D08//0+/3/8vf4//P4+f/z+fr/8/j5//P4+f/z+vr/8/j5//L19//1+vv/8fb2//H3+P/0+Pr/8ff2/3FvbqQAAAAAAAAAAAAAAAD/////8fb3//P5+//x9/f/8/j5//P4+f/z9/j/9Pn5//P4+f/w9fb/8/j5//P4+f/z+Pn/8/j5//P4+f/z+Pn/9Pn6//P3+P/z+Pn/8/j5//P5+v/0+vv/8/j5//L5+f/x+Pj/9Pn6//H39v/7////AQEBBAAAAAAAAAAAAAAAAP/////w9/f/8vf2//D18//z+fr/8/j5//P4+f/y+fn/7O7v//b49//0+vr/8/j5//P4+f/z+Pn/8/j5//P4+f/z9/j/7/X1//T4+v/z+Pn/7/Pz/+709P/y9/j/8/f3//D4+P/z9/j/8vr7//////8EBAQRAAAAAAAAAAAAAAAABQUFFv/////0+Pr/8vf4//T5+v/z+Pn/8/j5//X4+f/v+fj/8vf2//P4+f/z+Pn/7/T1//X6+//z+Pn/8/j6//P39//t8/T/8/j5//P4+f/y+Pn/5vLy//b6+//z+Pn/8/j5//X7/f/09fT/HhwbTAAAAAAAAAAAAAAAAAAAAAAAAAAAJCMiVfj9/v/y9/j/7PDv//P6+//z+Pn/8/j5//P4+f/z+fn/8/j5//P4+f/z+Pn/8/j5//L4+f/1+Pj/8vf4//T5+v/z+Pn/8/j5//P4+f/2+fv/8/j5//P4+f/1+vv/7PHx/7m7udwKCgogAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/f38//X6+//v9fb/9Pj5/+3x8v/y+Pn/8/j5//P4+f/z+Pn/8/j5//P59//z+Pn/8/j5//H3+P/x9fT/8/n5//P4+f/z+Pn/8/j5//P4+f/z+Pn/8PX2//P5+f/8/Pv/BAQEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApKSlU9vz9//P5+v/y+Pn/9vr7//T5+v/z+Pn/8/j5//P4+f/z+Pn/8vf4//P4+f/z+Pn/9Pn6//X6+//z+Pn/8/j5//P4+f/z+Pn/8/j5//Dz8//2/Pz/9vr7/z49PHEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADf3Nzr6/Dv//X6+P/w9/b/8/j5//T5+v/0+Pn/9Pn6//T5+v/0+fr/9Pj4//P5+//z+Pn/8/j5//P4+f/z+Pn/6vHv//X6+//z+fr/7vb3/+329///////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////8PX3//P5+//z+Pn/9Pn6//T5+v/0+fr/9Pn6//b6+//j7Ov/8vn5//P4+f/z+Pn/8vf4//P4+f/q9fb/9Pr5//X6+//y9vf//////wICAgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD9/f398PX0//P4+f/z+Pj/9fn6//T5+v/0+Pr/9Pn6//X7/P/0+fr/8/j5//P4+f/z+Pn/8/j5//T5+f/09/j/7PHx//////8ODw8rAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADe2dfz8vf4//P3+f/t9PT/9/r8/+v39v/w9PT/9vv8//T4+f/z+Pn/8/j5//H09f/z+fj/8PPz//b+////////ExMTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4Nzhk//////X8/f/z+Pn/9fr7//T4+P/1+Pn/8/r6//P4+v/y+fr/6/X1//X49//5////a2trnAQEBAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEE9/j2/P//////////9vv7//f7+//0+fn/7fX1//X6+v/+////39/f7R0cHEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApKChRqq2szrm5ttX/////d3d2pRERESYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////+AH///AA///AAH//gAAf/wAAD/4AAA/+AAAH/AAAA/wAAAP4AAAB+AAAAPAAAADwAAAA8AAAAPAAAADwAAAA+AAAAfwAAAP8AAAD/gAAB/8AAAf/AAAP/8AAH//gAD//8AD///wD////7////////////8=",document.head.appendChild(e),_.defaultArguments=x,_.version=_.defaultArguments.app_version,console.log("target version:",_.version),console.log("local version:",localStorage.getItem("version"));var n=localStorage.getItem("version");n&&n===_.version||(console.log("new version detected, clearing cache"),localStorage.clear(),localStorage.setItem("version",_.version),location.reload(!0));var t=document.getElementById("versionInfo");t&&(t.innerHTML="version: <b>".concat(_.version,"</b>"));var A=[document.getElementById("innerCanvas"),document.getElementById("coverCanvas"),document.getElementById("outputCanvas"),document.getElementById("whiteCanvas"),document.getElementById("blackCanvas")];w.mirage=F(j,[_.defaultArguments].concat(A)),function(){try{_.innerScaleSlider=document.getElementById("innerScaleRange"),_.innerScaleInput=document.getElementById("innerScaleInput"),_.coverScaleSlider=document.getElementById("coverScaleRange"),_.coverScaleInput=document.getElementById("coverScaleInput"),_.innerWeightSlider=document.getElementById("innerWeightRange"),_.innerWeightInput=document.getElementById("innerWeightInput"),H.forEach((function(e){document.getElementById(e.id).addEventListener(e.event,(function(n){R(n,e.callback,e.errorMsg||"操作失败! ")}))})),_.isOnPhone?(document.getElementById("innerInputHint").remove(),document.getElementById("coverInputHint").remove()):(_.mouseX=0,window.addEventListener("mousemove",(function(e){_.mouseX=e.clientX})),window.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("paste",(function(e){R(e,function(){var e=O(L().mark((function e(n){var t,A,r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.clipboardData.items,A=0;case 2:if(!(A<t.length)){e.next=22;break}if(-1===t[A].type.indexOf("image")){e.next=19;break}if(r=t[A].getAsFile(),!(_.mouseX>window.innerWidth/2)){e.next=13;break}return e.t0=w.mirage,e.next=9,N(r);case 9:e.t1=e.sent,e.t0.updateCoverImg.call(e.t0,e.t1),e.next=18;break;case 13:return e.t2=w.mirage,e.next=16,N(r);case 16:e.t3=e.sent,e.t2.updateInnerImg.call(e.t2,e.t3);case 18:return e.abrupt("break",22);case 19:A++,e.next=2;break;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),"加载失败! ")})),document.getElementById("innerCanvas").addEventListener("drop",(function(e){e.preventDefault(),R(e,function(){var e=O(L().mark((function e(n){var t,A,r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.dataTransfer.items,A=0;case 2:if(!(A<t.length)){e.next=14;break}if("file"!==t[A].kind||-1===t[A].type.indexOf("image")){e.next=11;break}return r=t[A].getAsFile(),e.t0=w.mirage,e.next=8,N(r);case 8:return e.t1=e.sent,e.t0.updateInnerImg.call(e.t0,e.t1),e.abrupt("break",14);case 11:A++,e.next=2;break;case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),document.getElementById("coverCanvas").addEventListener("drop",(function(e){e.preventDefault(),R(e,function(){var e=O(L().mark((function e(n){var t,A,r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.dataTransfer.items,A=0;case 2:if(!(A<t.length)){e.next=14;break}if("file"!==t[A].kind||-1===t[A].type.indexOf("image")){e.next=11;break}return r=t[A].getAsFile(),e.t0=w.mirage,e.next=8,N(r);case 8:return e.t1=e.sent,e.t0.updateCoverImg.call(e.t0,e.t1),e.abrupt("break",14);case 11:A++,e.next=2;break;case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))),document.getElementById("toggleVersionRecord").addEventListener("click",(function(e){var n=document.getElementById("versionRecordTable");"none"===window.getComputedStyle(n).display?(n.classList.remove("displayNone"),n.classList.add("displayBlock"),e.target.textContent="隐藏主要更新记录",window.scrollTo(0,document.body.scrollHeight)):(n.classList.remove("displayBlock"),n.classList.add("displayNone"),e.target.textContent="显示主要更新记录")}))}catch(e){alert("监听器设置失败! "+e.message),console.error("监听器设置失败!",e.message,e.stack)}}()}))})();</script></head><body class="backgroundPrimary"><div id="content" class="displayFlexColumn marginTopHigh backgroundPrimary frontColor"><h1 class="title marginBottomMedium">幻影坦克工厂</h1><div class="fontMedium frontSecondaryColor marginTopMedium">支持全彩喔 ;D</div><div class="displayFlexRow fontMedium marginTopMedium frontSecondaryColor"><div id="downloadHtmlLink" class="textDecorationUnderline frontLinkColor transformSize">下载当前页面</div><div class="frontSecondaryColor fontSmall marginLeftLow">(可在任意支持html5的浏览器中使用)</div></div><div class="switchContainer displayFlexRow paddingHigh backgroundSecondary" id="isDarkmodeContainer"><div id="isDarkModeLabel" class="marginRightLow fontMedium">关灯</div><label class="switch"><input type="checkbox" id="isDarkmodeCheckbox"> <span class="switchSlider"></span></label></div><div class="DisplayArea displayFlexColumn refWidthFull marginTopHigh"><div class="PageContainer borderRadiusExtreme fontMedium frontColor displayFlexColumn refWidthHigh backgroundSecondary paddingHigh"><div class="RowContainer refWidthHigh displayFlexRow justifySpaceBetween marginTopHigh"><div class="CanvasContainer displayFlexColumn paddingMedium refWidthHalf"><div class="marginBottomMedium"><label for="innerFileInput" class="inputReact transformSize">选择里图文件</label> <input type="file" id="innerFileInput" accept="image/*"></div><div id="innerInputHint" class="displayFlexColumn marginTopLow fontSmall"><div>或拖动至下方画布</div><div class="marginTopLow">或粘贴 (ctrl+v)</div></div><canvas id="innerCanvas" class="refWidthFull marginTopMedium"></canvas></div><div class="CanvasContainer displayFlexColumn paddingMedium refWidthHalf"><div class="marginBottomMedium"><label for="coverFileInput" class="inputReact transformSize">选择表图文件</label> <input type="file" id="coverFileInput" accept="image/*"></div><div id="coverInputHint" class="displayFlexColumn marginTopLow fontSmall"><div>或拖动至下方画布</div><div class="marginTopLow">或粘贴 (ctrl+v)</div></div><canvas id="coverCanvas" class="refWidthFull marginTopMedium"></canvas></div></div><div class="RowContainer refWidthHigh displayFlexRow justifySpaceBetween marginTopHigh"><div class="CanvasContainer displayFlexColumn paddingMedium refWidthHalf"><div class="switchContainer"><div class="marginRightLow fontMedium">全彩输出</div><label class="switch"><input type="checkbox" id="isColoredCheckbox"> <span class="switchSlider"></span></label></div><hr class="refWidthHigh marginTopMedium marginBottomMedium"><button id="swapButton" class="inputReact transformSize">表里图互换</button><hr class="refWidthHigh marginTopMedium marginBottomMedium"><div class="">输出图像尺寸:</div><input type="number" id="maxSizeInput" class="inputReact marginTopLow" min="1" max="4096"><div class="marginTopLow fontSmall frontSecondaryColor">(指长和宽中的较大值)</div><div class="fontSmall frontSecondaryColor">(0即为不指定)</div><hr class="refWidthHigh marginTopMedium marginBottomMedium"><div class="">里图混合权重</div><input type="range" id="innerWeightRange" class="refWidthHigh marginTopLow" min="0" max="1" step="0.02"><div class="marginTopLow"><span>或输入: </span><input type="number" id="innerWeightInput" class="inputReact" step="0.02"></div><div class="marginTopLow fontSmall frontSecondaryColor">(0~1,黑白输出时无效)<br>(越高里图色彩越准确)<br>(反之表图色彩越准确)</div></div><div class="CanvasContainer displayFlexColumn paddingMedium refWidthHalf"><div class="">↓ 输出图像 ↓</div><canvas id="outputCanvas" class="refWidthFull marginTopMedium"></canvas><button id="saveButton" class="inputReact transformSize marginTopHigh">保存结果</button></div></div><div class="RowContainer refWidthHigh displayFlexRow justifySpaceBetween marginTopHigh marginBottomHigh"><div class="CanvasContainer displayFlexColumn paddingMedium refWidthHalf"><div class="marginTopMedium">里图色阶缩放</div><input type="range" id="innerScaleRange" class="refWidthHigh marginTopLow" min="0" max="1" step="0.02"><div class="marginTopLow"><span>或输入: </span><input type="number" id="innerScaleInput" class="inputReact" step="0.02"></div><div class="marginTopLow diplayFlexColumn fontSmall frontSecondaryColor">(0~1,越低里图越暗)</div><div class="marginTopMedium">↓ 黑色背景预览 ↓</div><canvas id="blackCanvas" class="refWidthFull marginTopMedium"></canvas></div><div class="CanvasContainer displayFlexColumn paddingMedium refWidthHalf"><div class="marginTopMedium">表图色阶缩放</div><input type="range" id="coverScaleRange" class="refWidthHigh marginTopLow" min="0" max="1" step="0.02"><div class="marginTopLow"><span>或输入: </span><input type="number" id="coverScaleInput" class="inputReact" step="0.02"></div><div class="marginTopLow diplayFlexColumn fontSmall frontSecondaryColor">(0~1,越高表图越亮)</div><div class="marginTopMedium">↓ 白色背景预览 ↓</div><canvas id="whiteCanvas" class="refWidthFull marginTopMedium"></canvas></div></div></div></div><div id="pageBelow" class="displayFlex frontColor justifyCenter alignCenter flexColumn marginTopHigh"><div id="versionInfo" class="fontLarge">version: <b>UNKNOWN</b></div><div class="marginTopLow fontSmall">如发现有功能不正常可手动清理浏览器缓存后刷新</div><div class="marginTopMedium fontSmall transformSize"><a class="frontLinkColor" href="https://github.com/Uyanide" target="_blank">Github - Uyanide (我)</a></div><div class="marginTopMedium fontSmall transformSize"><a class="frontLinkColor" href="https://github.com/Uyanide/Mirage_Colored" target="_blank">Github - Mirage_Colored (本项目仓库)</a></div><div id="toggleVersionRecord" class="frontLinkColor backgroundPrimary fontSmall transformSize marginTopMedium">显示主要更新记录</div><div id="versionRecord" class="marginTopMedium marginBottomMedium"><table id="versionRecordTable" class="fontSmall paddingHigh borderRadiusExtreme displayNone backgroundSecondary borderCollapse frontColor"><tbody><tr><td>1.0.0</td><td>初始版本。</td></tr></tbody></table></div></div></div></body></html>